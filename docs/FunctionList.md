## 1단계 - 지하철역/노선 관리 기능
## 1단계 구현할 기능 목록 
- [x] 지하철 역 관리 API기능 완성하기
    - [x] 역 생성
      - [x] 보장된 이름만 들어오게 하기(보장된 이름, 한글이며 띄어쓰기가 없음 마지막에 역이 들어가야함 )
      - [x] 이미 등록된 이름이면 예외가 발생한다.
        - [x] controller에서 400 응답 코드를 발생시킨다.
    - [x] 역 삭제
     - [x] DELETE "/stations/{id}" 요청 시 특정 지하철 삭제
- [x] 지하철 노선 관리 API기능 완성하기
  - [x] 노선 생성
    - [x] 보장된 이름만 들어오게 하기(보장된 이름, 한글과 숫자이며 띄어쓰기가 없음 마지막에 선이 들어가야함)
    - [x] 저장시 색깔을 입력한다 
    - [x] 이미 등록된 이름이면 예외가 발생한다. 
        - [x] controller에서 400 응답 코드를 발생시킨다.
  - [x] 노선 목록 조회
    - [x] GET "/lines" 요청 시 전체 노선 목록 반환 
        - [x] 등록된 노선이 없을 시 empty list 반환 
    - [x] 노선 조회
      - [x] GET "/lines/{id}" 요청 시 특정 노선 반환
        - [x] 노선에 포함된 역 목록 함께 응답 
  - [x] 노선 수정 
      - [x] PUT "/lines/{id}" 요청 시 특정 노선 속성 변경
        - [x] 색깔, 이름을 수정할 수 있다.
  - [x] 노선 삭제
      - [x] DELETE "/lines/{id}" 요청 시 특정 노선 삭제
        - [x] 노선만 삭제 
  
## 1단계 프로그램 제약 사항 
- [x] @Service, @Component 등 스프링 사용금지(@Controller)
  - [x] 스프링 빈을 사용하지 않고 객체를 직접 생성하고 의존 관계를 맺어주기
- [x] 데이터 저장은 XXXDao를 활용
  - [x] 1단계에서는 DB를 사용하지 않고 Dao객체 내부의 List에서 데이터를 관리함
  - [x] 기능 구현간 필요한 로직은 추가가 가능하고 기존 코드도 변경이 가능함 

## 2단계 - 프레임워크 적용
## 2단계 구현할 기능 목록  
- [x] 1,2단계에서 구현한 애플리케이션에 스프링 빈과 스프링 JDBC를 적용하기
  - [x] Spring JDBC 의존성 추가 
  - [x] H2 데이터 베이스 설정 
- [x] XXXDao 인터페이스화
    - [x] StationDao 인터페이스화
    - [x] LineDao 인터페이스화
- [x] XXXDao에서 관리하던 정보를 DB에서 관리할 수 있도록 변경하기
- [x] 스프링 JDBC 활용하여 H2 DB에 저장하기
  - [x] DBLineDao 구현
  - [x] DBStationDao 구현
  - [x] Dao 객체가 아닌 DB에서 데이터를 관리하기
  - [x] DB에 접근하기 위한 spring jdbc 라이브러리를 활용하기 (JdbcTemplate 등)
- [x] controller 로직 구현
  - [x] lineController 구현
  - [x] stationController 구현
- [x] H2 DB를 통해 저장된 값 확인하기
  - [x] 실제로 DB에 저장이 잘 되었는지 확인할 수 있도록 설정하기
- [x] 스프링 빈 활용하기
  - [x] 매번 생성하지 않아도 되는 객체와 싱글톤이나 static으로 구현되었던 객체들을 스프링 빈으로 관리해도 좋음
  

## 3단계 - 지하철 구간 관리 기능 
- [ ] 지하철 노선 추가 API 수정
  - [ ] 노선 추가 시 3가지 정보를 추가로 입력 받음
    ```json
    POST /lines HTTP/1.1
    accept: */*
    content-type: application/json; charset=UTF-8
    
    {
        "color": "bg-red-600",
        "name": "신분당선",
        "upStationId": "1",
        "downStationId": "2",
        "distance": "10"
    }
    ```
  - [ ] 노선 추가시 구간 정보도 함께 등록
  - [ ] 예외
    - [ ] 
- [ ] 지하철 구간 추가 API 구현
  ```json
    POST /lines/1/sections HTTP/1.1
    accept: */*
    content-type: application/json; charset=UTF-8
    host: localhost:52165
    
    {
        "downStationId": "4",
        "upStationId": "2",
        "distance": 10
    }
    ```
  - [ ] 예외
- [ ] 노선 조회 시 구간에 포함된 역 목록 응답
- [ ] 노선에 포함된 구간 정보를 통해 상행 종점부터 하행 종점까지의 역 목록을 응답
    ```json
    HTTP/1.1 201 
    Location: /lines/1
    Content-Type: application/json
    Date: Fri, 13 Nov 2020 00:11:51 GMT
    
    {
        "id": 1,
        "name": "신분당선",
        "color": "bg-red-600",
        "stations": [
            {
                "id": 1,
                "name": "강남역"
            },
            {
                "id": 2,
                "name": "역삼역"
            }
        ]
    }
    ```
- [ ] 지하철 구간 제거
    ```json
    DELETE /lines/1/sections?stationId=2 HTTP/1.1
    accept: */*
    host: localhost:52165
    ```
  
## 3단계 기능 요구사항
### 구간 등록/제거 부가 설명
새로 등록할 구간의 상행역과 하행역 중 노선에 이미 등록되어있는 역을 기준으로 새로운 구간을 추가한다.
- [ ] 상행 종점 등록
- [ ] 하행 종점 등록
- [ ] 갈래길 방지
  - [ ] 하나의 노선에는 갈래길이 허용되지 않기 때문에 새로운 구간이 추가되기 전에 갈래길이 생기지 않도록 기존 구간을 변경
- [ ] 구간 제거
  - [ ] 종점이 제거될 경우 다음으로 오던 역이 종점이 됨
  - [ ] 중간역이 제거될 경우 재배치를 함
  - [ ] 노선에 A - B - C 역이 연결되어 있을 때 B역을 제거할 경우 A - C로 재배치 됨
  - [ ] 거리는 두 구간의 거리의 합으로 정함


### 구간 등록/제거 예외 설명
- [ ] 역 사이에 새로운 역을 등록할 경우 기존 역 사이 길이보다 크거나 같으면 등록을 할 수 없음
- [ ] 상행역과 하행역이 이미 노선에 모두 등록되어 있다면 추가할 수 없음
    - [ ] A-B, B-C 구간이 등록된 상황에서 B-C 구간을 등록할 수 없음(A-C 구간도 등록할 수 없음)
- [ ] 상행역과 하행역 둘 중 하나도 노선에 포함되어있지 않으면 추가할 수 없음
- [ ] 구간이 하나인 노선에서 마지막 구간을 제거할 때
  - [ ] 제거할 수 없음